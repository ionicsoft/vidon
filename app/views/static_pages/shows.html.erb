<div class="container">
  <h3>My Shows</h3>
  <hr>
  <% current_person.user.subscriptions.each do |sub| %>
    <div class="row well">
      <div class="col-sm-2">
        <% if sub.show.promo_image.attached? %>
          <%= image_tag(url_for(sub.show.promo_image), :alt => "Promo Image", :style => "height: 100px; width: 100px;") %>
        <% else %>
          <%= image_tag("nullPhoto.png", :alt => "Thumbnail", :style => "height: 100px; width: 100px;") %>
        <% end %>
      </div>
      <div class="col-sm-8">
        <b><%= sub.show.name %></b>
        <p><%= sub.show.description %></p>
        <% if sub.cancel? %>
          <p class="text-warning">This subscription will not renew.</p>
        <% end %>
      </div>
      <div class="col-sm-2">
        <%= link_to "Episodes", sub.show, class: "btn btn-primary btn-block btn-sm" %>
        <% if sub.cancel? %>
          <%= form_with(model: sub) do |form| %>
            <%= form.hidden_field :cancel, value: false %>
            <%= form.submit "Renew", class: "btn btn-info btn-block btn-sm" %>
          <% end %>
        <% else %>
          <%= form_with(model: sub) do |form| %>
            <%= form.hidden_field :cancel, value: true %>
            <%= form.submit "Cancel", class: "btn btn-danger btn-block btn-sm" %>
          <% end %>
        <% end %>
      </div>
    </div>
  <% end %>
  <div class="col-sm-12 text-center">
    <%= link_to "Find new shows!", shows_path, class: "btn btn-primary btn-lg" %>
  </div>
</div>
