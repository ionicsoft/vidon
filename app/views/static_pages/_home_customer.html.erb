<div class="container" id="customer-home">
  <%= render "flash_notice" %>
  <div class="row">
    <div class="col">
      <% @show = Show.first %>
      <div class="jumbotron" style="background-image: url('<%= url_for @show.promo_image %>')">
        <h2 class="display-4"><%= @show.name %></h2>
        <h5>Season 1, Ep. 2</h5>
        <%= link_to "Play Next", @show.episodes.first.video, class: "btn btn-primary" %>
      </div>
    </div>
  </div>
  <div class="row" id="home-subscriptions">
    <div class="col">
      <div class="home-header"><h3>Your Subscriptions</h3></div>
      <div class="scrolling-wrapper">
        <% if current_person.user.subscriptions.any? %>
          <% current_person.user.subscriptions.each do |sub| %>
            <%= link_to sub.show do %>
              <div class="card">
                <%= image_tag url_for(sub.show.promo_image), class: "card-img-top" if sub.show.promo_image.attached? %>
                <h5 id="card-text" class="card-header"><%= truncate sub.show.name, length: 16 %></h5>
              </div>
            <% end %>
          <% end %>
        <% end %>
        <%= link_to browse_path do %>
          <div class="card">
            <%= image_tag "homepage/04.jpg", class: "card-img-top" %>
            <h5 id="card-text" class="card-header">Find some shows!</h5>
          </div>
        <% end %>
      </div>
    </div>
  </div>
  <hr>
  <div class="row" id="home-recommendations">
    <div class="col">
      <div class="home-header"><h3>Your Recommendations</h3></div>
      <div class="scrolling-wrapper">
        <% Show.all.each do |show| %>
          <%= link_to show do %>
            <div class="card">
              <%= image_tag url_for(show.promo_image), class: "card-img-top" if show.promo_image.attached? %>
              <h5 id="card-text" class="card-header"><%= truncate show.name, length: 16 %></h5>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
  <hr>
  <div class="row" id="home-recent">
    <div class="col">
      <div class="home-header"><h3>Recently Updated</h3></div>
      <div class="scrolling-wrapper">
        <% Show.order(updated_at: :desc).limit(10).each do |show| %>
          <%= link_to show do %>
            <div class="card">
              <%= image_tag url_for(show.promo_image), class: "card-img-top" if show.promo_image.attached? %>
              <h5 id="card-text" class="card-header"><%= truncate show.name, length: 16 %></h5>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>
